{{define "listing.html"}}
{{template "base" .}}
{{end}}

{{define "content"}}
<!-- Header -->
<header class="mb-6">
    <div class="flex items-center justify-between flex-wrap gap-4">
        <div>
            <h1 class="uk-h2 m-0">{{.Title}}</h1>
            <nav class="mt-2">
                <ul class="flex items-center space-x-2 text-sm text-muted-foreground">
                    <li><a href="/" class="uk-link flex items-center"><svg class="w-4 h-4" fill="currentColor"
                                viewBox="0 0 20 20">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg></a></li>
                    {{range .PathSegments}}
                    <li><span class="text-muted-foreground">/</span></li>
                    <li><a href="{{.URL}}" class="uk-link">{{.Name}}</a></li>
                    {{end}}
                </ul>
            </nav>
        </div>
        <div class="text-muted-foreground">
            {{len .Files}} items
        </div>
    </div>
</header>

<!-- Controls -->
<section class="mb-6">
    <div class="flex items-center justify-between flex-wrap gap-4">
        <!-- View Toggle -->
        <div class="uk-tab" data-uk-tab>
            <ul class="flex space-x-1">
                <li><a href="#" data-view="grid"
                        class="flex items-center space-x-2 px-3 py-2 rounded text-muted-foreground hover:text-foreground transition-colors"><svg
                            class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z">
                            </path>
                        </svg><span>Grid</span></a></li>
                <li class="uk-active"><a href="#" data-view="list"
                        class="flex items-center space-x-2 px-3 py-2 rounded bg-primary text-primary-foreground"><svg
                            class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd"
                                d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                                clip-rule="evenodd"></path>
                        </svg><span>List</span></a></li>
            </ul>
        </div>
        <!-- Filter Controls -->
        <div class="uk-filter" data-uk-filter="target: .file-container">
            <div class="flex space-x-1">
                <a href="#" data-uk-filter-control class="uk-btn uk-btn-primary uk-btn-small">All</a>
                <a href="#" data-uk-filter-control="[data-type='folder']"
                    class="uk-btn uk-btn-default uk-btn-small">Folders</a>
                <a href="#" data-uk-filter-control="[data-type='image']"
                    class="uk-btn uk-btn-default uk-btn-small">Images</a>
                <a href="#" data-uk-filter-control="[data-type='document']"
                    class="uk-btn uk-btn-default uk-btn-small">Documents</a>
            </div>
        </div>
    </div>
</section>

<!-- File List/Grid -->
<section id="grid-view" class="file-container">
    <div class="space-y-2">
        {{range .Files}}
        <div data-type="{{.Type}}"
            class="fr-widget border-border bg-card text-card-foreground border p-4 flex items-center justify-between hover:bg-accent/50 transition-colors">
            <div class="flex items-center space-x-3 flex-1 min-w-0">
                <div class="flex-shrink-0">
                    {{if eq .Icon "folder"}}
                    <svg class="w-5 h-5 text-primary" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path>
                    </svg>
                    {{else if eq .Icon "image"}}
                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
                            clip-rule="evenodd"></path>
                    </svg>
                    {{else}}
                    <svg class="w-5 h-5 text-muted-foreground" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z"
                            clip-rule="evenodd"></path>
                    </svg>
                    {{end}}
                </div>
                <div class="min-w-0 flex-1">
                    <a href="{{.URL}}" class="uk-link font-medium block truncate">{{.Name}}</a>
                    <p class="text-muted-foreground text-sm">{{.Size}}, {{.ModTime}}</p>
                </div>
            </div>
            <div class="flex-shrink-0">
                {{if .IsFolder}}
                <a href="{{.URL}}" class="uk-btn uk-btn-primary uk-btn-small flex items-center space-x-1">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path>
                    </svg>
                    <span>Open</span>
                </a>
                {{else}}
                <a href="{{.URL}}" class="uk-btn uk-btn-default uk-btn-small flex items-center space-x-1" download>
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <span>Download</span>
                </a>
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
</section>

<!-- Empty State -->
{{if not .Files}}
<div class="text-center py-12">
    <svg class="w-16 h-16 mx-auto text-muted-foreground mb-4" fill="currentColor" viewBox="0 0 20 20">
        <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"></path>
    </svg>
    <h3 class="uk-h4 mb-2">This folder is empty</h3>
    <p class="text-muted-foreground">No files or folders to display</p>
</div>
{{end}}
{{end}}